<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Info.com Android Choice Screen CMP</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui" />
	</head>
	<body>
		<!--//
			version: <%= version %>
			generated: <%= date %>
		//-->
		<div>
			<button id="btnInit">cmp('init')</button>
			<button id="btnSubscribe">cmp('subscribe', 'onConsentChanged')</button>
			<button id="btnEmit">cmp('emit', 'onConsentChanged')</button>
			<button id="btnUnsubscribe">cmp('unsubscribe', 'onConsentChanged')</button>
			<button id="btnShowConsentTool">cmp('showConsentTool')</button>
		</div>

		<script src="./tcf-2.0-loader.js"></script>
		<!--//
        <script src="./tcf-2.0-cmp.js"></script>
        //-->

		<script>
			/*
            const onReady = () => {
                console.log('onReady');
            }
            const onEvent = (tcData, success) => {
                console.log('onEvent', tcData, success)
                if (!success || !tcData) {
                    console.log('onEventError', tcData, success);
                    return;
                }
 
                if (tcData.eventStatus === 'tcloaded') {
                    onReady();
                }
            }
            __tcfapi('addEventListener', 2, onEvent);
            __tcfapi('ping', 2, (pingReturn) => {
                console.log('ping', pingReturn);
            });
            */

			const config = {
				gdprApplies: true,
				logging: true,
				scriptSrc: './tcf-2.0-cmp.js',
			};

			cmp('init', config, (store) => {
				console.log('init complete', store);
			});

			// __tcfapi('init', 2, () => {
			//    console.log('custom init call');
			// });

			document.querySelector('#btnShowConsentTool').addEventListener('click', () => {
				cmp('showConsentTool', { someProp: 1 }, () => console.log(1));
			});

			document.querySelector('#btnSubscribe').addEventListener('click', () => {
				cmp('subscribe', 'onConsentChanged', (tcData, success) => {
					console.log('subscribe:onConsentChanged', tcData, success);
				});
			});

			document.querySelector('#btnUnsubscribe').addEventListener('click', () => {
				cmp('unsubscribe', 'onConsentChanged');
			});

			document.querySelector('#btnEmit').addEventListener('click', () => {
				cmp('emit', 'onConsentChanged', {
					a: 'b',
				});
			});
		</script>
	</body>
</html>
